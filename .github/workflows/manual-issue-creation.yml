name: Manual Issue Creation

on:
  workflow_dispatch:
    inputs:
      issue_type:
        description: 'Type of issue to create'
        required: true
        default: 'general'
        type: choice
        options:
          - bug
          - feature
          - maintenance
          - security
          - general
      title:
        description: 'Issue title'
        required: true
        type: string
      description:
        description: 'Issue description'
        required: true
        type: string
      priority:
        description: 'Issue priority'
        required: false
        default: 'medium'
        type: choice
        options:
          - low
          - medium
          - high
          - critical
      assignee:
        description: 'Assign to user (optional)'
        required: false
        type: string

jobs:
  create-issue:
    runs-on: ubuntu-latest
    steps:
      - name: Create issue
        uses: ./.github/actions/create-issue
        with:
          title: "${{ inputs.issue_type == 'bug' && '[BUG]' || inputs.issue_type == 'feature' && '[FEATURE]' || inputs.issue_type == 'maintenance' && '[MAINTENANCE]' || inputs.issue_type == 'security' && '[SECURITY]' || '[GENERAL]' }} ${{ inputs.title }}"
          body: |
            ## ${{ inputs.issue_type == 'bug' && 'ğŸ› Bug Report' || inputs.issue_type == 'feature' && 'âœ¨ Feature Request' || inputs.issue_type == 'maintenance' && 'ğŸ”§ Maintenance Task' || inputs.issue_type == 'security' && 'ğŸ”’ Security Issue' || 'ğŸ“ General Issue' }}

            **Created via:** GitHub Actions Workflow
            **Priority:** ${{ inputs.priority }}
            **Created by:** @${{ github.actor }}

            ### Description
            ${{ inputs.description }}

            ### Additional Context
            - **Workflow Run:** ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}
            - **Triggered by:** ${{ github.actor }}
            - **Timestamp:** ${{ github.event.head_commit.timestamp || github.event.repository.updated_at }}

            ---
            *This issue was created automatically using the manual issue creation workflow.*
          labels: "${{ inputs.issue_type }},${{ inputs.priority }},automated"
          assignees: "${{ inputs.assignee }}"
---
import {
   Card,
   CardHeader,
   CardTitle,
   CardDescription,
} from "@packages/ui/components/card";
import { Button } from "@packages/ui/components/button";
import { Check } from "@lucide/astro";

type ButtonVariant =
   | "outline"
   | "default"
   | "destructive"
   | "ghost"
   | "link"
   | "secondary";

interface PricingPlan {
   name: string;
   price: string;
   period: string;
   description: string;
   variant: ButtonVariant;
   popular?: boolean;
   features: string[];
}

const pricingPlans: PricingPlan[] = [
   {
      name: "Free",
      price: "$0",
      period: "/ mo",
      description:
         "Get started with our open source platform. No credit card required.",
      variant: "outline",
      features: [
         "$1 AI Usage Credit",
         "Organization Support",
         "API Keys & SDK Access",
         "Community Support",
         "No Credit Card Required",
         "All Core Features Included",
      ],
   },
   {
      name: "Basic",
      price: "$5",
      period: "/ mo",
      description: "Perfect for creators and teams who need more AI usage.",
      variant: "default",
      popular: true,
      features: [
         "$5 AI Usage Credit",
         "Additional Usage Available",
         "Organization Support",
         "API Keys & SDK Access",
         "Priority Support",
         "All Core Features Included",
      ],
   },
   {
      name: "Supporter",
      price: "$25",
      period: "/ mo",
      description: "Support our open source project with exclusive benefits.",
      variant: "outline",
      features: [
         "$25 AI Usage Credit",
         "Feature Request Options",
         "Organization Support",
         "API Keys & SDK Access",
         "Dedicated Support",
         "All Core Features Included",
      ],
   },
];
---

<section id="pricing" class="h-screen relative py-16 md:py-24">
  <div class="mx-auto max-w-6xl ">
    <div class="mx-auto max-w-2xl text-center">
      <h2 class="text-balance text-2xl font-bold md:text-3xl lg:text-4xl">
        Simple, transparent pricing
      </h2>
      <p class="text-muted-foreground mx-auto mt-4 max-w-xl text-balance">
        Choose the plan that fits you. No hidden fees, cancel anytime.
      </p>
    </div>

    <div class="relative mt-12">
      <div class="grid gap-6 md:grid-cols-3">
        {pricingPlans.map((plan) => (
          <Card
            className={`relative flex flex-col ${plan.popular ? 'ring-2 ring-primary scale-105 shadow-xl' : 'shadow-lg'}`}
          >
            <CardHeader className="p-8">
              <div class="flex items-center justify-between">
                <CardTitle className="font-medium">{plan.name}</CardTitle>
                {plan.popular && (
                  <span class="bg-primary text-primary-foreground px-3 py-1 rounded-full text-xs font-medium">
                    Most Popular
                  </span>
                )}
              </div>
              <span class="mb-0.5 mt-2 block text-2xl font-semibold">
                {plan.price}<span class="text-sm font-normal text-muted-foreground">{plan.period}</span>
              </span>
              <CardDescription className="text-sm">{plan.description}</CardDescription>
            </CardHeader>

            <div class="border-y px-8 py-4">
              <a href="https://app.contentagen.com/auth/sign-in" target="_blank" rel="noopener noreferrer">
                <Button
                  className="w-full"
                  variant={plan.variant}
                  aria-label={`Get started with ${plan.name} plan at ${plan.price} per month`}
                >
                  Get Started
                </Button>
              </a>
            </div>

            <ul role="list" class="space-y-3 p-8 flex-1">
              {plan.features.map((feature) => (
                <li class="flex items-center gap-2">
                  <Check class="text-primary size-3" stroke-width="3.5" />
                  <span class="text-sm">{feature}</span>
                </li>
              ))}
            </ul>
          </Card>
        ))}
      </div>
    </div>
  </div>
</section>
